# Contest Info

date: 2019.02.16 10:00-15:00

[practice link](http://opentrains.mipt.ru/~ejudge/team.cgi?contest_id=2584)

# Solutions

## K. Rectangles

**题目大意**：给你一个 $n\times n$（$n\le 300$）的矩阵，元素在 $[-10^{9},10^{9}]$ 之间，求所有子矩形的 $所有元素之和周长\frac{所有元素之和}{周长}$ 的最大值。

**题解**：容易想到，我们枚举一维的区间，然后二分答案，这样以后很容易 $\mathcal{O}(n)$ `check`。复杂度为 $\mathcal{O}(n^{3}\log\frac{A}{\varepsilon})$。这个复杂度过高，我们现场没有卡过，但是似乎有人卡过去了。

这里介绍一种更好的[二分方法](http://codeforces.com/blog/entry/62602)，这种方法适用于：我们要做 $n$ 次二分，取 $n$ 次答案的最值，但是这 $n$ 次二分并不需要按特定的顺序进行。

我们采取这样的策略，假设当前的最大值为 $M$，二分之前我们先 `check` 一下这次二分能否得到大于 $M$ 的值，如果不能，显然这次二分就没有必要再做了。

考虑到如果这 $n$ 次二分的答案是严格递增的，那么我们仍然要做 $n$ 次二分，复杂度并没有变优。我们可以把这 $n$ 次二分进行的顺序先 `shuffle` 一下，可以证明这样期望只需要做 $\log n$ 次二分，复杂度降为了 $\mathcal{O}(n+\log n\log A)$，有了较大的改善。

本题采用这种方法，复杂度为 $\mathcal{O}(n^{3}+n\log n\log\frac{A}{\varepsilon})$，可以很容易通过。