# Contest Info

date: 2018.10.01 12:30-17:30

[practice link](https://cn.vjudge.net/contest/258247)

# Solutions

## A. Thickest Burger

签到题。

## B. Relative atomic mass

签到题。

## C. Recursive sequence

签到题。

## D. Winning an Auction

**题目大意**：一共 $n$ 件物品，Alice 手上有 $A$ 金钱，Bob 有 $B$。每轮各自出价 $a \in[0, A], b\in [0, B]$。若 $a > b$ 则 Alice 花费 $a$ 获得这件物品，若 $a < b$ 则 Bob 花费 $a$ 获得这件物品，若 $a=b$ 则第奇数件物品的时候 Alice 获得，否则 Bob 获得。两人均采用最优策略（最大化获得的物品数量），且都知道 $n, a, b$，问结果。

**题解**：定义 $f[p=0/1][i][j][k]$ 表示当前局是第奇数/偶数局，还剩 $i$ 件物品，Alice 有 $j$ 金钱，Bob 有 $k$ 金钱，Alice 能获得的最大物品。那么我们只需要预处理出 $f$，然后每次询问我们查询 $f[1][n][A][B]$ 即可。

当 $i=1$ 的时候，Alice 和 Bob 的出价都是手上的全部金钱。考虑 $i\geq 2$，如果 $j=k$，那么 $f$ 值是 Alice 在后续 $i$ 件物品中的优势局面个数。

否则，假设当前局面是 Alice 占优势，我们枚举 Alice 的出价 $x=0,1,2,\dots$，那么如果 Alice 获胜，收益为 $\text{va}_x = f[1-p][i-1][j-x][k]+1$ 。如果 Bob 想获胜，则出价 $x+1$,收益为 $\text{vb}_{x+1} = f[1-p][i-1][j][k-x-1]$。如果 $\text{vb}_{x+1}\geq \text{va}_x$，那么 Bob 不会浪费钱出 $x+1$，此时 $f[p][i][j][k]=\text{va}_{x}$。如果 $\text{va}_{x+1}\leq \text{vb}_{x+1}$，那么 Alice 不会浪费钱出 $x+1$，此时 $f[p][i][j][k]=\text{vb}_{x+1}$。否则，我们继续枚举 Alice 出价为 $x+1$ 的情况。

复杂度是 $\mathcal{O}(2n^4/(3!))$，其实 $j<k$ 和 $j>k$ 的时候，有 $f[p][i][j][k]=f[1-p][i][j][k]$，但是因为体系结构的原因，这个优化实测会变慢。

## G. Do not pour out

**题目大意**：一个直径和高均为 $2$ 的圆柱体杯子，里面装入了高度为 $h$ 的水。现在将杯子倾斜至水刚好不倒出，求水面的面积。

**题解**：显然二分。水的高度大于 $1$ 的情况比较简单，这里不赘述。

水的高度小于 $1$ 时，我们二分水面与杯壁形成的夹角，设为 $\theta$。我们用一些与 $xOy$ 平行的平面来切割这个图形做积分。

设 $x$ 为平面与圆柱体上顶面的距离，那么截面的面积为 $\alpha-\sin\alpha\cos\alpha$，其中 $\alpha=\arccos(1-x\tan\theta)$。那么 $x=\frac{1-\cos\alpha}{\tan\theta}$。积分式为：
$$
\begin{aligned}
&\int_{0}^{2}\alpha-\sin\alpha\cos\alpha\mathbb{d}x\\
=&\int_{0}^{2}\alpha-\sin\alpha\cos\alpha\mathbb{d}\frac{1-\cos\alpha}{\tan\theta}\\
=&\frac{1}{\tan\theta}\int_{0}^{\arccos(1-2\tan\theta)}\alpha\sin\alpha-\sin^{2}\alpha\cos\alpha\mathbb{d}\alpha\\
=&\frac{1}{\tan\theta}(-\alpha\cos\alpha+\sin\alpha-\frac{1}{3}\sin^{3}\alpha)\big{|}^{\arccos(1-2\tan\theta)}_{0}
\end{aligned}
$$

底面沾水的面积和水面的面积成 $\sin\theta$ 比例。

## K. New Signal Decomposition

**题目大意**：求 $\displaystyle{b_{i}=\sum_{j=0}^{p-1}a_{j}2^{\sin^{3}(\frac{2\pi ij}{p})}}$，其中 $p$ 为质数，$a$ 给出。

**题解**：注意到 $\sin$ 以 $2\pi$ 为周期，那么 $2\pi ij$ 可以替换为 $2\pi(ij\mod{p})$。那么把所有下标都对 $p$ 的某个原根取个 $\log$ 就变成 FFT 了。

# Dirt Replay

D: `-5` dp 的时候枚举顺序反了；卡常数（体系结构）

I: `-2` 三分写错了