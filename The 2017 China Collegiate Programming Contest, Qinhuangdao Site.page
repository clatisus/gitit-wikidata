# Contest Info

date: 2018.09.30 13:00-18:00

[practice link](https://cn.vjudge.net/contest/258040)

# Solutions

## A. Balloon Robot 

**题目大意**：

在一个$m\le 10^9$个位置的圆桌上，有$n\le10^5$个参赛队伍，第$i$支队伍的座位号为$s_i$.

接下来有$p$次事件，为队伍$a_i$在$b_i$时刻通过了一道题目。

有一个发气球机器人，从位置$k$出发，每秒循环移动一个位置，然后把当前位置的队伍应该获得的气球都发送给他们（包括恰好这一秒通过的题目）.

找一个$k$，使得总的等待时间最少，输出最少等待时间。

**题解**:

假设$k$给定，事件$i$的贡献为$s_{a_i}-k+x\cdot m - b_i$，其中$x$为最小的非负整数，使得$s_{a_i}-k+x\cdot m - b_i$非负。

令$b_i=y\cdot m + c_i$，$0\le c_i<m$，则$s_{a_i}-k+x\cdot m - b_i = s_{a_i}-k+(x-y)\cdot m - c_i$.

显然$x-y$只会取$0,1,2$三种取值，将对应的$k$作为关键事件，从大到小扫描一次即可。

时间复杂度$O(n\log{n})$.

## D. Graph Generator 

**题目大意**：

给出一个生成图的方法，对于$1$到$n$的排列$p_n$，第$i$次操作：

- 取当前存在的若干个点$a_1,\cdots,a_m$，$0\le m<i$，任意两个点不属于同一连通块
- 新增点$p_i$向$a_1,\cdots,a_m$所在连通块中每一个点连一条边

给出一张$n\le10^5$个节点，$m\le10^5$条边的简单无向图，问是否可以用上述方法生成，若可以输出一组可行方案。

**题解**：

考虑倒着执行这个过程，每次选取一个连通块，然后从中取出一个度数等于`连通块大小-1​`的点（若没有则无解），这个点作为$p_i$，然后删去它，继续执行。

考虑任意时刻，不同的连通块是相互独立的，同一连通块中，如果存在合法的点，它一定是这个连通块中度数最大的（多个点任取一个），并且删去它之后会给这个连通块的每个节点度数减去一，度数大小的相对关系没有发生改变。

因此我们可以按度数从大到小的顺序来删点，连通性就从小到大做一次启发式合并的并查集，然后边撤销边处理即可。

时间复杂度$O(n\log{n})$.

# Dirt Replay

B: `-3` 爆数组comb；模数2e9 加法爆int；预处理冗余被卡一倍常数

D: `-1` 答案是 No 的情况下直接 return，没有清空

H: `-3` 写错了；边界情况，输入全 1

L: `-1` 读入字符串下标错误

M: `-1` 少了一个情况