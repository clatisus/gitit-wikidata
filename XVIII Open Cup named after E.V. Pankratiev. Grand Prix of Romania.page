# Contest Info

date: 2018.11.09 16:31-21:31

practice link: opentrains 10391

# Solutions

## A. Balance

**题目大意：**有一个 $n\times n(n\leq 50)$ 的矩阵，（吃完火锅回来困了，明天再写）

**题解：**

## D. Infinite Pattern Matching

**题目大意**：把 $1\to+\infty$ 的二进制表示排成一个无限长的 $01$ 串，再给你一个 $01$ 串 $s$，问你 $s$ 在该串中最早出现的位置。

**题解**：瞎搞。枚举 $s$ 是由几个数字拼成的。

- 若 $1$ 个，那么如果 $s$ 没有前导 $0$，一定是由它本身组成最优；如果 $s$ 有前导 $0$，由它前面加上一个 $1$ 最优。
- 若 $2$ 个，枚举分界线在什么地方，那么我们就能知道这个数的后缀和前缀。要使结果最优，让前后缀重合的部分尽可能大即可。
- 若 $3$ 个以上，那么至少有一个数是完整的，枚举哪个区间是一个完整的数即可。

## I. Salaj

**题目大意**：给你一个 $n$ 个点的有向图，初始时没有边。定义一个序列 $A$ 合法，当且仅当存在一种加边的顺序，使得添加第 $i$ 条边后，强连通分量的数量为 $A_{i}$。对每个 $i\in[1,\max]$，求长度为 $i$ 的合法序列 $A$ 的数量。

**题解**：首先来研究要达到 $x$ 个强连通分量至少和至多能有多少条边。

最少的情况显然是：优先连接 $1\to2,2\to3,\cdots$，每当 $A_{i}$ 减小为 $x$ 时，就从 $n-x+1$ 往 $1$ 连一条边。因此至少需要 $n-x$ 加上反向边的数量（即 $A_{i}$ 减小的次数）。

最多的情况即为：连接所有正向边，$1$ 到 $n-x+1$ 的强连通分量中连接所有反向边，共 $\frac{n(n-1)+(n-x+1)(n-x)}{2}$ 条。

设 $dp[i][j][k]$ 表示第 $i$ 条边，有 $j$ 个强连通分量，连接了 $k$ 条反向边的方案数。根据上述限制简单转移即可。

这样的复杂度是 $\mathcal{O}(n^{5})$。注意到 $i\ge2n$ 时，下界一定能够满足，此时可以省去 $k$ 这一维。

时间复杂度 $\mathcal{O}(n^{4})$。 