# Contest Info

date: 2018.12.09 14:51-19:51

practice link: opentrains 10435

# Solutions

## A. Coloring Roads

**题目大意**：$n$ 个节点的树，若干次询问，每次将点 $u$ 到根路径上的每条边染色为 $c$，并询问出现次数恰好为 $m$ 次的颜色个数。

[类似的技巧](http://clatisus.com/Discover%20Vladivostok%202018%20day%202#i.-kindom-and-roads)

**题解**：

轻重链剖分后，暴力维护每条重链上不同的颜色段即可，时间复杂度$O(n\log{n})$.

## D. Dumae

**题目大意**：$n$ 个人排队，每个人的位置在区间 $[L_i,R_i]$ 之间，并且有 $m$ 对关系，每对关系是 $(u_i,v_i)$ 表示 $u_i$ 要站在 $v_i$ 前面，求一种可行的方案。

**题解**：我们增加一个 $0$ 号点，然后建图，如果图不是一个 DAG 那么无解。否则，我们按照拓扑序，用当前节点的 $R_u-1$ 更新（取 min）后继的 $R_v$。然后我们再按照逆拓扑序贪心，设当前要确定第 $i$ 个位置，取出出度为 $0$ 且 $L \leq i$ 的点中有最小的 $R$（且大于等于 $i$）的人。

## E. Electronic Circuit

**题目大意**：我们递归定义一个图（且必须指定两个不同点作为起点和终点）是好的：

- 只有一条边的图是好的，起点和终点就是它的两个端点；
- 图 $G,G'$ 都是好的，把 $G$ 的终点和 $G'$ 的起点合并的新图也是好的；
- 图 $G,G'$ 都是好的，把 $G,G'$ 的起点、终点分别合并的新图也是好的。

给出一个图，让你随意确定起点和终点，判断图是否为好的。

**题解**：考虑递归定义的逆过程，我们每次删掉所有的重边（定义第三条），然后删掉所有度为 $2$ 的点（定义第二条），不断如此。如果最后图只剩下两个点和一条边（定义第一条），那么图是好的。

## F. Fake Plastic Trees

逗你玩题。构造方式是唯一的。

## G. Fascination Street

**题目大意**：给出一个序列 $\{w_i\}$，你可以交换两个数至多 $k(k\leq 9)$ 次。要求你选择一些位置，最小化权值之和，满足每个位置要么自己被选择，要么左右两个位置至少有一个位置被选择（不允许连续三个位置不被选择）。

## H. Fractions

签到题。

## I. Game on Plane

**题目大意**：给出一个正 $n$ 边形上的 $n$ 个点，两人组合游戏，每次可以选择两个点连一条边。要求边不交叉，任意时刻出现一个凸包，则获胜。

**题解**：容易发现连一条边把点分成了两堆，并且每次选择的两个点都只能是孤立点（否则对方下一步获胜），得到：$\text{sg}_n=\displaystyle\text{mex}_{a+b=n-2}(\text{sg}_a\oplus \text{sg}_b)$。

## J. Histogram Sequence

**题目大意**：有一个长度为 $n$ 的数列 $\{h_{i}\}$，对于 $1\le l\le r\le n$ 的每个区间 $[l,r]$，定义它的价值为 $(r-l+1)\min_{l\le i\le r}h_{i}$。现在将所有 $\frac{n(n+1)}{2}$ 个价值排序，要求你给出第 $L$ 个到第 $R$ 个之间的值。

**题解**：二分求出第 $L$ 个和第 $R$ 个的值 $a_{L}$ 和 $a_{R}$，$(a_{L},a_{R})$ 中间的值全部都要取。具体的个数使用单调栈计算。

## L. Timsort

签到题。