# Contest Info

date 2017.08.05 12:00-17:15

[practice link](https://cn.vjudge.net/contest/176256)

# Solutions

## C. Count The Pairs

**题目大意**：给出 $n$ 个点和 $m$ 条边的无向图，保证边权两两不同。 $p$ 次询问，每次询问给出一个非负整数 $t$ ，问有多少点对 $(u,v)$ 满足从 $u$ 到 $v$ 的最小瓶颈路中的瓶颈边不小于 $t$。

**题解**：无向图的最小生成树一定也是它的最小瓶颈生成树。用 Kruskal 算法求最小生成树，当加入一条新的边 $(u,v)$ 的时候，以这条边为瓶颈边的点对共有 $siz(u) \times siz(v) \times 2$ 对，其中 $siz(x)$ 表示 $x$ 所在的连通块的大小，用并查集顺便维护。这样当我们求出最小生成树的同时，也计算出了每个边权作为最小瓶颈路的时候的贡献，再搞一个后缀和，然后询问的时候去二分找到刚好不小于 $t$ 的位置输出答案。时间复杂度为 $\mathcal{O}(m \log{m} + p \log{n})$。

# Replay and Summary

## Replay

一开始 W 看到 J 名字叫 tree，果断接锅去看题，看完之后发现果然是一个 sb 题，随手写了一个树上的可持久化 trie 就 MLE 了。将动态开空间去掉之后，因为数组开小又 TLE 了一次。为本场比赛罚时爆炸奠定了基础。

D 看了 C 题觉得是个最小瓶颈生成树，拿过键盘就写过了。成功 a 掉本场比赛唯一一道没有罚时的题。接下来 W 听 Z 讲了 D 的题意之后，表示很嫌弃 Z 的写法，同时也想放 Z 去做那几道计算几何题，于是就开始写。写了三种算法判断了各种情况还是 wa 了，Z 跟 D 讨论了一下他们的解法觉得没问题，也过来 a 掉了。a 掉之前交错代码又 wa 了一次（交的 W 的错误代码）。

D 发现 K 题是之前字符串专题中 A 题的弱化版，于是 W 接锅修改了一下 dp 函数。因为忘记取模 wa 了一次，也过掉了。

D 和 W 趁 Z 在刚计算几何，发现 B 似乎就是一个 kmp。瞎转换了一下口头验证感觉没问题，写了之后因为没有判断 m = 1 的特殊情况又 wa 了一次。

D 和 W 继续趁着 Z 在刚计算几何，口胡了一下 F 直接状压 dp 加上记忆化搜索。感性理解了一下觉得可用的状态很少，而且询问也不多，而且 W 觉得正好可以用到才学的 __builtin_ctz() 来优化常数，然后就写了。然后因为打表一个数字写错了，又 wa 了一次。更让人感动的是，W 写 F 的打表的时候，还叫上了 Z 在旁帮忙检查。

D 和 W 仍然趁着 Z 在刚计算几何，开始想 I 题。问题一直在如何求树上被一条树边分开的两部分经过非树边的最小边权。在 dp 上想了很久，突然发现 n 只有 1000。于是直接先枚举每个点作为最小边权的一个端点即可。W 因为没怎么想清楚，也没好好跟 D 讨论，导致 D 很早就怀疑有问题的一个地方被忽略掉了，也 wa 了很多次。

看了看总榜没有跌到 7 题最后，还是很感动。（最后 Z 也没做出计算几何）。

## coldwater

## ShinriiTin
新的机房没有电脑，本来准备只是看题的话就懒得背电脑过来了，结果就尴尬了。一来先用手机看题，看了 K 和 C，一开始以为 K 有点读错了题意，C 想了一下想到了做法，就去写了一发 a 了，期间看到 W 交 J 的时候动态开点提醒了一下。然后 K 又读了一遍题看了下样例读对了题意，发现和字符串专场的一道题很像，就和 W 说了让他去写，因为当时是他做的。然后 W 和 Z 让我读 D，读完之后我和 Z 的想法是一样的，我觉得应该没有问题，然后 Z 发现他上一次提交粘错代码了，重新交了一下就 a 了。然后读了 B ，感觉是 Kmp ，给 W 说了一下，他去推了一下就去写了，因为没有处理 m=1 的情况 wa 了一次，改正后也 a 了。在 W 写题的时候我想了下 F，感觉就是状压记忆化搜索一下，但是要枚举下一次选的边，可能时间复杂度有点问题。等 W 写完我跟他说了 F，他刚好昨天有看到快速取出二进制数中 0 的方法，就去写了，因为打表打错了一个位置 wa 了一次，检查改正之后也 a 了。然后我和 W 一起想 I，我感觉很僵硬，一直在想 Delaunay 三角剖分。W 给我讲了一下他的想法，我感觉没问题，就看着他写。W 写的时候我感觉他有一个问题，但是 W 坚持没有问题，就一直写完了。然后 wa 了好几次，期间我给出了一种情况的数据让他的程序出错了，然后改正后还是 wa。之后就很绝望的改改交交，然后突然就 a 了。之后又对比了一下前后提交的代码，发现的确是我一开始发现会存在的那个问题。这一场我除了做了一道 C 之外，就一直在读题口胡辅助，可能是因为昨天写由乃题浪费了时间有点害怕。这一场的罚时非常不值得，好多次错误提交都是可以避免的，以后的比赛中要注意。

## zhongzihao
计算几何这种东西真是让人绝望。。于是我已经摸了两场鱼了。总之今天要好好补这种恶心人的题（堆了三道了）。其它没什么好说的，求下次的计算几何能 A 。