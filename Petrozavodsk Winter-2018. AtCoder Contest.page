# Contest Info

date: 2019.03.08 13:01-18:01

[practice link](http://opentrains.snarknews.info/~ejudge/team.cgi?contest_id=001513)

# Solutions

## A. Vacant Seat

**题目大意**：交互题。给你 $n(n<10^5)$ 个位置，他们形成了一个环，其中 $n$ 是奇数。每个位置要么没有人坐，要么有一个男/女生坐。相邻两个位置不会有相同性别的人。显然至少有一个位置是空的，让你找到这个位置。你可以问最多 $20$ 次，每次问一个位置，会得到这个位置的信息。

**题解**：第一次问直径的两个点，假设左右被分为偶数和奇数。如果两点同色，那么偶数部分一定有空位，我们把这两个点合并为一个，递归询问左边。否则右边一定有空位，把这两个点连起来递归问右边。实现的时候显然每次暴力删除另一边的点就可以了。

## C. Construct Point

**题目大意**：找出一个整点三角形严格内部的整点。

**题解**：假设端点按照 $x$ 排序之后为 $(x_1, y_1), (x_2, y_2), (x_3, y_3)$，其中 $x_1<x_2<x_3$（$x_1=x_2$ 或者 $x_2=x_3$ 的情况较为简单）。那么我们就是要求区间 $(x_1, x_2]$ 和 $[x_2, x_3)$ 两个区间的整点个数（转成求取整函数的和，用类欧做）。我们二分到一个位置 $x_0$，然后找到一个点即可。

## E. XorTree

**题目大意**：给定一棵 $n$ 个点的树，每条边有一个权值 $a_i(a_i\in[0, 16))$。让你做最少的操作，每次选择两个点，和一个数 $x$。把路径上的边都异或上 $x$，使得最后每条边都是 $0$。

**题解**：定义每个点的权值是邻边的权值异或和。那么操作完全等价于，每次选择两个点，和一个数 $x$，把两个点的权值异或上 $x$。最后使得每个点的权值是 $0$。

对于权值非 $0$ 的点。我们先按权值相同两两配对，剩下最多 $15$ 个点，可以发现如果一个集合 $S$ 的异或和为 $0$，我们可以用 $|S|-1$ 次操作处理这个集合。于是做一个集合 dp，求出最多被分割为多少个异或和为 $0$ 的集合即可。

## F. Antennas on Tree

**题目大意**：给出 $n$ 个点的一棵树，让你选择最少的 $k$ 个点 $v_0, v_1, \dots, v_{k-1}$，使得对 $\forall u$ 有元组 $(d(v_0, u), d(v_1, u), \dots, d(v_{k-1}, u))$ 互不相同。

**题解**：

## J. Simple APSP Problem

**题目大意**：给你一个 $n\times m$ 的四连通网格，$n,m\le10^{6}$，有 $n\le30$ 个黑格子不能走，求每对白格子的距离之和。

**题解**：注意到黑格子非常少。对于相邻的两个全白行 $i,i+1$，容易证明只有从 $\le i$ 的行走到 $\ge i+1$ 的行，才会走这两行之间的边，且恰走一次。那么我们可以事先给答案加上这样的点对数，然后把这两行之间的边权置为 $0$（即把这两行缩成一行），对列同理。这样之后网格至多为 $61\times61$，直接 `bfs` 即可。