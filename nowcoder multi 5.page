# Contest Info

date: 2018.08.02 12:00-17:00

[practice link](https://www.nowcoder.com/acm/contest/143#question)

# Solutions

## A. gpa

**题目大意**：

**题解**：用 nth_element 实现，一个 log。

## D. inv

**题目大意**：给出一个 $1$ 到 $n$ 的全部偶数的排列，现在要将它和一个由 $1$ 到 $n$ 所有奇数组成的单调数列归并起来，最小化归并后数列的逆序对数。

**题解**：偶数内部的逆序对数是一定的，考虑将奇数依次插入到偶数的 $\frac{n}{2} + 1$ 个空中去。

用线段树维护每个空位会产生的逆序对数，当做完一个奇数之后会对一个前缀 $+1$ ，对一个后缀 $-1$ ，因此一定存在一个最优的放法使得插的空位是单调不减的。

因此直接每个奇数贪心取产生逆序对数最小的位置即可。

comment: 就算题目给出的奇数数列没有规定顺序，奇数数列单调递增的时候也能取到最优解。

## E. room

**题目大意**：$n$ 个四人间，$4n$ 个人，一开始的居住状态为 $(x_{i0},x_{i1},x_{i2},x_{i3})(1\leq i\leq n)$。要将居住状态调整为 $(y_{i0},y_{i1},y_{i2},y_{i3})$ ，问最少有几个人被调整。

**题解**：费用流。先将起止状态都在一个房间的人捆绑在一起，那么起始每个房间向对应的若干捆人连边 $(1,0)$，这些捆人向终态每个房间连 $(1,4-w)$ 的边，表示最终房间中有 $w$ 个人没有移动，而另外 $4-w$ 个人被调整过来。

然后，源点连起始每个房间 $(1,0)$，终态每个房间连汇点 $(1,0)$，注意源点还要连终态每个房间 $(1,4)$，表示最终房间可能每个人都是被调整过来的。

std solution: 起始第 $i$ 间宿舍向终止第 $j$ 间宿舍连边，费用为它们的交，二分图带权匹配。

## G. max

签到题

## H. subseq

**题目大意**：给定一个长度为 $n$ 的整数数列 $a_n$ ，求字典序第 $k$ 小的下标序列 $b$，使得 $a_{b_1},\dots,a_{b_m}$ 是严格单调上升序列。

**题解**：从后往前 dp 求出以位置 $i$ 开头的单调上升序列数量，然后从前往后确定每一位，注意**不能枚举到不单调上升的**，以及数量爆 long long 可以与 inf 取 min 避免。

## J. plan

签到题

# Dirt Replay

G：`-1` Z 和 D 在讨论 corner case 的时候，W 就着急上去写，结果写错了一个地方（应该慢慢写，写完给队友看）

F：`-1` Z 的 Fenwick Tree 单点修改没用上传入的值（没有造数据测试，没有 code review）

E：`-1` 一开始建图的算法有问题，没有限制起始一个宿舍的人的总流量，也没有一个人都不留在原宿舍的边（造数据）

I：`-2` 第一次结论有问题，第二次 ans 没用 ll（code review，极限数据测试）

H：`-2` 第一次没看到数据范围更新的 clarification，第二次算法有问题，没有判断答案递增（造数据）
