# Contest Info

date: 2018.09.18 16:30-21:30

practice link: opentrains 10396

# Solutions

## B. Card Game

签到题。

## C. The Most Expensive Gift

**题目大意**：一个仅有 $a,b,c$ 组成的字符串 $S$，定义它的子序列 $T$ 的价值为 $\displaystyle \frac{\text{len}_T^2}{c_T}$。其中 $\text{len}_T$ 是 $T$ 的串长，$c_T$ 是 $T$ 的最短循环节长度，且 $c_T\mid \text{len}_T$。

**题解**：考虑长度为 $x$ 的循环节，它出现了 $y$ 次，那么答案为 $xy^2$。当 $x=9$ 的时候，一定存在一个字母在该循环节中出现 $3$ 次，考虑这个字母单个字母作为循环节，那么 $x'=1,y'=3y$，可得 $x'y'^2=(3y)^2=9y^2$。所以长度大于等于 $9$ 的都不会更优，我们只需要枚举所有长度小于等于 $8$ 的串作为循环节即可。

## D. Cut the Cake

签到题。

## F. Bad Word

**题目大意**：对一个字母串进行操作，每次可以删掉一个非回文的子串，最多删多少次可以全删完。

**题解**：猜测了一下，如果有解，那么解最大是 $2$。

## G. Zenyk, Marichka and Interesting Game

**题目大意**：有 $n$ 堆石子，先手只能取 $A$ 个，后手只能取 $B$ 个，不能取者输，问胜负情况。

**题解**：定义 $f(x)=x\mod{A+B}$，我们证明 $x_{1},\cdots,x_{n}$ 与 $f(x_{1}),\cdots,f(x_{n})$ 的胜负态相同。我们使用归纳法证明。

当 $x_{1},\cdots,x_{n}<A+B$ 时，容易证明两人都从最大的石子堆取最优。这种情况下的胜负态可以直接求出。

若 $f(x_{1}),\cdots,f(x_{n})$ 是胜态，那么至少存在一个 $f(x_{i})\ge A$，且 $f(x_{1}),\cdots,f(x_{i})-A,\cdots,f(x_{n})$ 为负态。那么对于原问题也可以取 $x_{i}$ 这堆石子，显然取完后是个负态。因此 $x_{1},\cdots,x_{n}$ 也为胜态。

若 $f(x_{1}),\cdots,f(x_{n})$ 是负态，若先手取的石子堆 $x_{i}\ge A+B$，那么后手可以从同一堆中取，转移到一个负态。若先手取的石子堆 $x_{i}<A+B$，由于 $f(x_{1}),\cdots,f(x_{n})$ 是负态，那么取完后必然是胜态。因此不论先手怎么取都只能转移到胜态。

## I. Slot Machine

**题目大意**：若干个盒子，每个盒子里面有一些带颜色的小球。每次可以选择一个盒子，然后从里面随机获得一个球。问最坏情况下需要多少次选择，才能拿到两个同色球。

**题解**：第一种情况，如果一个盒子里面有两个同色球，那么我们可以一直选择这个盒子，答案是颜色种数加一。

第二种情况，我们枚举一个盒子，作为第一次选择的盒子，然后枚举里面的每个颜色，假设这个颜色是从这个盒子中拿到的，然后找到含这个颜色球的颜色种数最小的其他盒子。然后模拟最坏情况即可。

## J. Half is Good

**题目大意**：略

**题解**：可以看到 $w$ 只有 $62$ 位，我们把前 $22$ 位分组，然后接着的 $32$ 位暴力 sort。最后 $8$ 位影响答案的概率很小。

## L. Impress Her

**题目大意**：一个 $n\times m$ 的矩阵，矩阵中每种数都是四连通的。定义一种数的凸包是包含它的最小矩形。问有多少对数 $(a,b)$ 满足 $a$ 的凸包包含了 $b$ 的凸包（允许边界重合）。

**题解**：由于每种数都是四连通的，因此 $i$ 的凸包的大小至多是 $\min\{n,m\}\times\text{cnt}_{i}$。所以所有数的凸包大小的和是 $\mathcal{O}(nm\min\{n,m\})$ 的。我们直接暴力对每个数求出它的凸包包含了哪些数的凸包。我们可以数出凸包内部有多少种数，然后再减去凸包边界上和外面相连的有多少种数即可。

时间复杂度 $\mathcal{O}(nm\min\{n,m\})$。

# Dirt Replay