# Contest Info

date: 2018.12.07 16:30-21:30

practice link: opentrains 1489

# Solutions

## E. Eel and Grid

**题目大意**：一个循环的 $n\times m$ 的网格，一开始在左上角格子的中心 $(0,0)$，每次向右或向下走一步，如果穿过边界就走到对侧。问不重不漏地走完所有点后回到 $(0,0)$ 的方案有多少种。

**题解**：注意到，每个 $(x,y)$ 和 $(x+1,y-1)$ 的方向必须相同。设 $\gcd=\gcd(n,m)$，那么所有 $x+y\equiv x'+y'\pmod{\gcd}$ 的 $(x,y)$ 和 $(x',y')$ 的方向都应该相同。

容易发现，最开始 $\gcd$ 步的 $x+y$ 恰好膜 $\gcd$ 互不相同，因此这 $\gcd$ 步就决定了是否有解。之后很简单，不再赘述。

## G. Rectangle-free Grid

**题目大意**：要求你构造一个 $n\times n$ 的方阵，满足：

- $2\le n\le150$
- 每个位置是 `.` 或 `O`
- 至少有 $1700$ 个 `O`
- 不存在一个长宽至少为 $2$ 的子矩阵的四个角均为 `O`

**题解**：这里直接给出构造方法：

首先我们填充一个 $169\times169$ 的矩阵，之后截取其中 $150\times150$ 的一个子矩阵即可。对全部 $i,j,k\in[0,12]$，将 $\text{mat}[13i+j][13k+(ik+j)\mod{13}]$ 填入 `O`，其它位置填入 `.`

显然第 $4$ 个条件等价于任意两行至多有一列同为 `O`。首先注意到第二维相等的必要条件是 $k=k'$，对于一对固定的 $(i,j)$ 和 $(i',j')$，同余方程 $(i-i')k+(j-j')\equiv0\pmod{13}$ 在 $[0,12]$ 上至多只有一个解。因此该构造满足第 $4$ 个条件。