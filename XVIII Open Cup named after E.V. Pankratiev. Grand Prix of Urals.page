# Contest Info

date: 2018.11.08 19:49-24:49

practice link: opentrains 10392

# Solutions

## C. Christmas Garland

**题目大意**：

有$n\le2\times10^5$盏灯排成一行，第$i$盏灯的颜色为$a_i$，初始情况所有灯都是灭的.

$q\le2\times10^5$次操作，每次选择一种颜色，将这种颜色的所有灯的开关状态取反，之后询问有多少段极大的连续亮灯。

**题解**：

答案等价于求和每个位置它自己亮着且前一个位置没有亮着。

添加头尾两个额外的位置（颜色与其它位置不同且灯一直不亮），给相邻的两个颜色建无向边。

则等价于问图中多少条边的两端状态不同，然后答案除以二。

这样就是每次改变一个点，分度数大小是否超过$O(\sqrt(n))$处理一下即可。

时间复杂度$O(n\sqrt(n))$，空间复杂度$O(n)$.