# Contest Info

date: 2018.10.03 12:35-17:35

[practice link](https://cn.vjudge.net/contest/258247)

# Solutions

## D. Peak Tram

**题目大意**：给定 $n\leq 70$ 个建筑物的高度 $p_i$，定义一个建筑物是可见的，当且仅当它是前缀的严格最大值。要求至少有 $k$ 个物品是可见的。改变一个建筑物高度为 $h_i$ 的代价为 $|h_i-p_i|\times c_i$，求最小代价。

**题解**：有效的高度为 $p_i\pm 70$，一共 $2n^2$ 种。dp 即可，令 $\text{dp}[i][j][k]$ 表示前 $i$ 栋建筑，可见 $j$ 栋，且最高的一座为 $k$ 高度的代价。转移的时候，枚举 $i$ 要或者不要，注意不要的时候如果它可见，那么要把它的高度改小。时间复杂度 $\mathcal{O}(n^3)$。

## F. Perfect k-ary Tree 

**题目大意**：

给出一棵$n\le 10^5$的树，问有多少个子图是完全$2\le k\le5$叉树，取模。

**题解**：

令$dp[u][j]$表示$u$为根，高度为$j$的完全$k$叉树个数，考虑点分治求解。

对于当前的分治中心，以它为根进行$dp$，转移时维护前$i$个儿子选出$k$个高度为$j-1$的完全$k$叉树的方案数即可。

当删去分治中心的时候，给它连着的所有未处理的点加一条边连向新增的点，这个点记录分治中心不适用这个子树时的$dp$信息，维护转移的前后缀即可快速求得。

新增点数不超过$n$个，并且都是叶子，不影响复杂度。

时间复杂度$O(kn\log^2{n})$.

## H. Slim Cut

**题目大意**：给定一个带权无向图 $G(V,E;w)$。定义一个割是点的一个划分，把点集划分为两个非空集合 $S$ 和 $\bar{S}$。定义割 $\{S, \bar{S}\}$ 的 $\text{slimness}$ 为：

$$
\displaystyle \frac{\displaystyle \max_{(u,v)\in E, u\in S, v\in \bar{S}}w(u,v)}{\min(|S|,|\bar{S}|)}
$$

最小化 $\text{slimness}$。

**题解**：枚举最大的割边，那么大于枚举值的边形成了若干个连通块。我们希望这些连通块尽可能均匀地分在 $S,\bar{S}$ 中，做一个 0/1 背包 dp 即可。

注意到加一条边的时候，实际上是 $\text{sz}(u)$ 和 $\text{sz}(v)$ 变成了 $\text{sz}(u) + \text{sz}(v)$。也即删除和添加物品的背包 dp。我们可以维护每个物品存在的时间区间，然后对时间分治。那么现在就只有添加操作，再用 bitset 优化背包 dp 即可。

时间复杂度 $\mathcal{O}(n\log m\times \frac{n}{w})$。

# Dirt Replay

A: `-1` swap 路径写错

D: `-1` 位置 i 不作为答案时转移错误

F: `-4` 写错了一堆，共产主义复用了一个数组

J: `-1` D 坚持不用 W 的板子，写错了

K: `-1` 写错了