# Contest Info

date: 2019.01.15 15:10-20:10

opentrains 6314

# Solutions

## A. Access Points

**题目大意**：平面上有 $n$ 个整点，要求你给每个整点按照输入顺序各分配一个点（可以不是整点），并且这些点的两维必须分别不降，使得点对之间欧氏距离的平方和最小。

**题解**：显然两维可以分别计算。

对于某一维，设 $f_{i}(x)$ 表示第 $i$ 个点放在 $x$ 时的最小值，我们维护 $f'_{i}(x)$。开始时 $f'_{1}(x)=2x-2a_{1}$，但是我们要对 $f(x)$ 求前缀最小值，因此在 $f'_{1}(x)$ 等于 $0$ 之后，即 $x\ge a_{1}$ 时，有 $f’_{1}(x)\equiv 0$。

从 $i$ 转移到 $i+1$ 时也类似。我们首先有 $f'_{i+1}(x)=f'_{i}(x)+2x-2a_{i+1}$，然后再将大于 $0$ 的部分置 $0$。这里我们只需要记录一个偏移量即可用单调栈维护。

最后求一个积分即可。

时间复杂度 $\mathcal{O}(n)$。

## B. Brexit Negotiations

**题目大意**：给出一个 DAG，让你对其拓扑排序。每个点有一个 $e_i$。设其在拓扑序中的顺序是 $p_i$，那么它的代价是 $p_i - 1 + e_i$。让你最小化最大的权值。

**题解**：~~二分答案。~~假设答案为 $m$，那么每个点的合法区间就是 $p_i\in [1, m+1-e_i]$。我们逆拓扑序更新一遍区间右端点，然后再正向扫一遍拓扑排序。每次取出最小的右端点，判断是否合法。二分答案不会改变右端点的偏序关系，所以不用二分，直接扫一遍即可。

另一个做法：

排在最后的节点希望有最小的 $e_i$，我们逆拓扑排序，每次取出入度为 $0$ 的最小的 $e_i$ 即可。

## C. Circuit Board Design

**题目大意**：要求你在平面上画一棵与输入的树同构的树，使得边不相交，且边的长度为 $1$。

**题解**：首先在原点画根，设当前可行的角度区间为 $[l,r]$，那么将 $[l,r]$ 按照子树的 `size` 划分为若干个子区间，在每个区间的角平分线上画对应的儿子。

初始区间要注意小于 $\pi$，否则在一条链后接很多结点时会出现问题。

## G. Game Design

**题目大意**：让你在一个足够大的棋盘上摆放一些障碍物，且选择一个小球的起点。使得小球按照给定的移动方向序列可以移动到 $(0,0)$ 的洞口处。小球朝一个方向运动直到碰到障碍物位置。小球落入洞口之后不可以移动，不可以呆在原地不动。

**题解**：每次移动的步长乘 $2$，如果该方向有障碍物，那么不新增障碍物而是直接移动到该处。最后判断一下洞口是不是在一个之前经过的位置。

另一个做法：

一开始考虑一个 $3\times 3$ 的棋盘，小球起点在中间。每次在移动方向和其反向边界外各放一个障碍物。每次运动方向改变 $90$ 度，就把棋盘每一边扩展两个格子。

![nwerc 2018 G](/NWERC2018G.png)

## H. Hard Drive

签到题。

## I. Inflation

签到题。

## J. Jinxed Betting

**题目大意**：一些人在赌博，赌赢了分值会加 $1$，赌输了分值不变。现在 `Julia` 是第一名，她现在每次采取如下策略：选择剩下的人里分值最高的人中的多数意见下注，如果有分值最高的人中两种选择的人数恰好相等，那么她会随机选一种下注。现在问最坏情况下，她至少能保持第一名多少轮。

**题解**：显然每次最坏情况是：设有 $x$ 个人分值最高，`Julia` 和 $\lceil\frac{x}{2}\rceil$ 个人一起赌输，剩下的人赌赢。我们把所有人的分值一起减 $1$，每次的结果就变为：`Julia` 和 $\lceil\frac{x}{2}\rceil$ 个人一起扣 $1$ 分，其他人不变。

$x$ 个人分值最高时需要多少轮使得所有人分值减一可以很容易地预处理。之后我们对于每个 $i\in[2,n]$（`Julia` 是第一个人），计算第 $2$ 到 $i$ 个人的分值都变为第 $i$ 个人的分值时，`Julia` 是否还是第一，这样我们可以知道 `Julia` 是在哪个区间失去第一的。之后在这个小区间二分即可。

## K. Kleptography

签到题。