# Contest Info

date: 2018.11.29 19:30-24:30

[practice link](https://codeforces.com/gym/101964)

# Solutions

## D. Space Station

**题目大意**：

给出一棵$n\le1000$个节点的树，每条边有个权值，现在要从$1$号点出发，遍历每一条边至少一次，再回到$1$号点，可以不超过$m\le1000$次使用跳跃，花费$k$的代价，从当前所在的任意点移动到另一个任意的点，求最小的代价。

**题解**：

假设不使用跳跃，一定是从$1$号点出发`dfs`一遍再回到$1$号点，每条边恰好经过了$2$次。

如果使用一次跳跃从$u$移动到了$v$，可以让$u$到$v$路径上的边的少经过一次。

如果有两次跳跃的路径（边集）有交，那么交的边没有被遍历到，就不合法。

问题转化为，选择不超过$m$条不相交路径（考虑至少包含一条边），最大化路径上的边权和。

要选择不相交的路径，那么对于每一个子树，经过了子树根的路径最多只有一条，否则就不合法。

令$dp[u][i]$表示$u$子树内有$i$个点作为路径的端点，最大的路径边权和。

当$i$为奇数的时候，有路径跨越了子树，否则，路径全在子树内部。

转移时子树背包一下即可，时空复杂度$O(n^2)$.