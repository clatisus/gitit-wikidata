# Contest Info

date: 2019.05.01 18:05-23:05

[practice link](http://opentrains.snarknews.info/~ejudge/team.cgi?contest_id=005021)

# Solutions

## F. Foreign Postcards

签到题。

## J. Jenga Boom

按题意模拟即可。

## L. List of Primes

**题目大意**：将所有非空、由质数组成的集合排序，以质数的和为第一关键字，字典序为第二关键字。用 `JSON` 格式写出这个无限的序列，例如：

```
[2], [3], [2, 3], [5], [2, 5], [7], [3, 5], [2, 7], [2, 3, 5], [3, 7], [11], [2, 3, 7], [5, 7], [2, 11], [13], [2, 5, 7], ......
```

求 $[a,b]$ 这个区间的子串。（$a,b\le10^{18},b-a\le10^{5}$）

**题解**：打表可知数据范围内大约只需要 $2200$ 内的质数，总共有 $300$ 多个。我们从大到小 $dp$，求出 $dp[i][j]$ 表示所有大于等于 $i$ 的质数，和为 $j$ 的方案数及所有方案的 `JSON` 表示长度之和。预处理的复杂度为 $2200\times 400$。这个 $dp$ 数组包含了求出答案所需的所有信息。

求答案时，一种比较方便的实现方法是类似线段树的递归处理。我们先枚举质数的和，如果该和所占用的区间和 $[a,b]$ 相交，那么就递归下去计算这种情况；然后枚举第一个质数的值，如果相交，就把和减去这个质数，再递归下去枚举第二个质数。。。。。。如果枚举到和为 $0$ 的情况，就说明我们找到了一个在答案内的集合（为了知道这个集合，需要用栈将之前搜索的质数记录下来）。这一部分的复杂度是 $\mathcal{O}(b-a)$。

这样得到的子串会把开头和结尾的“半截”集合补充完整，为了得到正确的答案，我们需要计算一些偏移量，然后在这个串中再截取一下。