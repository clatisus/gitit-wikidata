# Contest Info

date: 2018.08.04 12:00-17:00

practice link: opentrains 10411

# Solutions

## C. Block, Stock and Two Smoking Galaxy Notes

**题目大意**：$n$ 个人，有 $m$ 对关系 $(u_i,v_i)$，表示这两个人能相互交流。让你从 $n$ 个人中选出一个 leader，并且把剩下的 $n-1$ 个人分成若干组。每个组要么 $1$ 个人，要么 $2$ 个人。如果是 $1$ 个人的小组，这个人要能与 leader 交流；如果是 $2$ 个人的小组，这两人要能相互交流，且存在一个人能与 leader 交流。

**题解**：枚举 leader，将能与他交流的人各自分为一组，然后剩下的人对这些人连边，求二分图匹配。

## D. Lunch Queue

**题目大意**：$n$ 个人陆续前来排队，每个人有一个颜色 $c_i$ 和一个权值 $a_i$。第 $i$ 人到达的时候，他会选一个最前的位置插队，位置满足：
插入之后与跟他同色的人相邻，且因为他插队而向后移动的人数不超过 $a_i$。输出最后的队伍序列。

**题解**：

## F. Shuffle

**题目大意**：定义对字符串的操作 $\text{shuffle}(s_1\dots s_n)=s_1s_3\dots s_{n-1}s_2s_4\dots s_n$，其中 $n$ 是偶数。给定两个长度相等的字符串 $s,t$，求最少的操作次数使得 $s$ 变成 $t$。

**题解**：

## G. Piecewise Linearity

**题目大意**：给出平面上 $x$ 坐标严格递增的 $n+1$ 个点 $P_0,P_1,\dots,P_{n-1},P_n$，它们构成的图形为线段 $P_iP_{i+1}(1\leq i\leq n-2)$，以及射线 $P_1P_0,P_{n-1}P_n$。问你是否存在实数 $\lambda_1,\lambda_2,\dots,\lambda_m$ 和 $a_1,\dots,a_m$ 使得下列函数与其具有相同的图形：

$$
f(x)=\sum_{i=1}^m\lambda_i|x-a_i|
$$

**题解**：

## H. Sketch

**题目大意**：定义一个序列 $\{a\}$ 的 $s_k$ 表示其所有长度为 $k$ 的不降子序列中最后一个元素的最小值。定义 $s(a)=s_1,\dots,s_l$ 是序列 $a$ 的一个速写，其中 $l$ 是 $a$ 最长不降子序列的长度。现给出 $k,n,m$，以及 $t_1,\dots,t_k$ ，让你构造一个序列 $a_1,\dots,a_n$，满足 $a_i\in [1,m]$，且如果 $t_i\neq -1$，那么必有 $t_i=s_i(1\leq i\leq k)$。同时 $s(a)$ 的长度等于 $k$。

**题解**：如果 $k>n$ 那么无解，否则我们把 $t_1,\dots,t_k$ 依次排列（如果 $t_i=-1$，那么我们让 $t_i=t_i-1,t_0=1$），这已经满足题目要求了，但是还剩下 $n-k$ 个数字。注意我们不能让 $s(a)$ 的长度大于 $k$。

我们往上述序列头部依次插入 $t_1+1,t_1+2,\dots,m$，直至长度为 $n$。每次插入一个数字 $x$ 的时候，我们找到 $t_1,\dots,t_k$ 中能续上 $x$ 的位置，然后将 $x$ 重复若干次，使得续上之后长度为 $k$。

## I. $\leq$ or $\geq$

**题目大意**：交互题。有 $n=10000$ 个栈，每个栈有 $k=10$ 个元素。一开始知道每个栈的栈顶，你要每次输出一个 $x$，接着 jury 会选择一个 $\leq$ 或者 $\geq$ 操作，将栈顶 $\leq$ 或者 $\geq x$ 的弹栈。要求你在 $50$ 次之内把所有栈清空。

**题解**：如果每次取中位数，那么可以被卡到 $k$ 次清空一半的栈，那么需要 $k\log n$ 次。考虑加权中位数，还剩 $k'$ 个元素的栈权重为 $2^{k'-1}$。

势能分析，一开始势能为 $n2^{k-1}$，每次选择带权中位数，会选到一半的势能，然后一次操作之后被选到的势能减半。所以一次操作相当于乘 $\frac{3}{4}$，最后势能为 $\frac{n}{2}$。所以需要 $\log_{\frac{4}{3}}2^k\approx 24$ 次操作。

# Dirt Replay

I: `-3` 解法错误；忘删调试语句；算法里排序关键字错误

K: `-5` RE没判断cnt=0；corner case没分析清楚；Z来改的时候elseif漏写else

G：`-4` 精度问题eps

H：`-1` 算法错误，构造出来的序列不是最短的，判无解判错了