# Contest Info

date: 2019.02.17 09:30-14:30

[practice link](http://opentrains.mipt.ru/~ejudge/team.cgi?contest_id=2584)

# Solutions

## A. Always Return a Value

**题目大意**：给你一个包括条件语句和 `return` 的语言，要你分析它是必定返回值，可能返回值，还是必定不返回值。代码不超过 `1.5kb`。

**题解**：算法用 `bitset` 随便搞搞就行了，主要是要写个编译器很烦。我写了 $300$ 多行 `orz`。

## B. Cheese

**题目大意**：给定 $n$ 个物品，每个物品为 $(V_i, M_i)$。让你最多选两个物品各切一刀（选择一个 $p\in [0, 1]$，物品被切为 $(pV_i, pM_i)$ 和 $((1-p)V_i, (1-p)M_i)$。然后分成两堆，使得两堆的 $\sum V$ 相等，且 $\sum M$ 相等。

**题解**：假设每个物品为宽为 $V_i$，高为 $\frac{M_i}{V_i}$ 的长方形。我们对它们按照高度排序，然后依此摆放起来，使得下边界对齐。需要将它们分成两堆，使得两堆的宽度之和相等，且面积之和相等。注意到我们可以切两刀，所以只需要找到一段连续的长为 $\frac{\sum V}{2}$ 的区域，它的面积等于 $\frac{\sum M}{2}$ 即可。左右边界处便是切的两刀，因为我们按照高度排序了，所以直接二分即可。

## D. Cross-section

**题目大意**：给你平面上的一个 $n$ 个点的简单多边形，以及一个点 $A(x_{0},y_{0})$。设有一条直线过 $A$，倾角在 $[0,\pi)$ 中均匀分布，求直线与简单多边形交线长（可能有多段）的期望。

**题解**：显然答案为该简单多边形在以 $A$ 为极点的极坐标系下的面积除以 $\pi$。考虑三角剖分，问题转化为要计算一个过极点的三角形的面积。我们直接暴力把线段的极坐标方程求出，再暴力积分即可（感觉我数学还行）。

## I. Security Policy

**题目大意**：要求你给一个平面图 $5$ 染色。

**题解**：可以[证明](https://en.wikipedia.org/wiki/Planar_graph#Euler's_formula)一个平面图至少有一个点度不超过 $5$，我们递归地解决这个问题。

- 如果这个点的所有邻点的颜色小于 $5$ 种，那么直接染就行了。

- 否则：

  ![](/2019_bytedance_day2_I.png)

  $0$ 是我们选取的点，我们将 $1\sim5$ 按照相对 $0$ 的极角序排序。如果 $1$ 能通过非 $1-2-3$ 及非 $1-5-4-3$ 的路径达到 $3$，那么 $2$ 一定不能通过 $2-3-4$ 或 $2-1-5-4$ 的路径到达 $4$，否则这两条路径一定会交叉，从而该图不是一个平面图（如图）。那么如果 $1$ 不能到达 $3$，我们就把 $1$ 修改为 $3$ 号点的颜色，它能到达的所有点也相应修改。$2$ 和 $4$ 号点同理。这样我们就匀出来了一种颜色给 $0$。

## J. Encryption

**题目大意**：定义 $f(X)$ 为所有小于等于 $X$ 且与 $X$ 互质的数之和。给出 $f(X)$，求 $X$。

**题解**：设 $X\neq1,X=p_{1}^{t_{1}}\cdots p_{s}^{t_{s}}$，容易证明 $f(X)=p_{1}^{2t_{1}-1}(p_{1}-1)\cdots p_{s}^{2t_{s}-1}(p_{s}-1)$。

我们先把 $X$ 分解，如果全是小质数，那么就比较简单了，我们从 $p_{s}$ 开始逐个计算即可。

如果有一个大质数，那么 $p_{s}-1$ 中的较大质数可能会和 $p_{s}$ 乘在一起，比较麻烦。考虑到 $p_{s}\ge10^{5}$，那么 $p_{1}^{2t_{1}-1}(p_{1}-1)\cdots p_{s-1}^{2t_{s-1}-1}(p_{s-1}-1)(p_{s}-1)$ 不超过 $10^{13}$，这个范围内的数约数个数并不多，大约在 $10^{4}$ 这个级别。我们可以直接暴力枚举 $p_{s}-1$ 中的小质数部分，然后就能很容易地 `check` 了。