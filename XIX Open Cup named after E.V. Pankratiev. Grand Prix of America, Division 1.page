# Contest Info

date: 2019.03.19 16:14-21:14

[practice link](http://opentrains.snarknews.info/~ejudge/team.cgi?contest_id=010454)

# Solutions

## E. Monotony

**题目大意**：给定一个 $r\times c$（$1\le r, c\le 20$）的矩阵，每个位置有一个数字，它们互不相同。定义一个矩阵是好的，当且仅当它的每一行、每一列都是单调的（增减性独立）。在所有的 $(2^r-1)(2^c-1)$ 种非空子矩阵中，有多少个好的？

**题解**：枚举一个行指标集，我们对满足单调性的列来 dp。我们预处理每两列之间的增减性（用一个 $s\in [0, 2^r)$ 来表示），那么对于当前行指标集，任意两列之间的增减性可以用预处理的值 and 上指标集即可。

然后我们 dp。$\text{dp}_{i,c}$ 表示当前在第 $i$ 列，增减性为 $c$ 的方案数。转移的时候枚举 $j$，设列 $j$ 和列 $i$ 之间的增减性为 $k$。那么有 $\text{dp}_{i,k}\leftarrow \text{dp}_{i,k}+\text{dp}_{j,k}$。复杂度 $\mathcal{O}(2^r\times c^2)$。