# Contest Info

date 2017.08.22 12:00-17:00

[practice link](http://acm.hdu.edu.cn/search.php?field=problem&key=2017+Multi-University+Training+Contest+-+Team+9&source=1&searchmode=source)

# Solutions

## E. FFF at Valentine

**题目大意**：给定一个简单有向图，随机选择两个不同的点 $u,v$，问你是否一定存在从 $u\to v$ 的路径，或者存在从 $v\to u$ 的路径。

**题解**：其实等价于判断整个图是否是一个链（两两点至少有单向路径可达的点集）。我们先对这个图强联通分量缩点，DAG 是否为一个链等价于是否存在路径数为 $1$ 的路径覆盖，我们求最长路就行了。或者判断拓扑序是否唯一也是可以的。

比赛的时候，我是在正反图上各做了一次压位 dp，求出了每个点能到达的点集，和到达它的点集。

## J. Two strings

**题目大意**：给出两个串 $S_1,S_2$，串 $S_1$ 只由大小写字母组成。串 $S_2$ 只由大小写字母、 `.` 以及 `*` 组成。问你两个串是否完全匹配。其中 `.` 可以单个任何字符，`*` 表示其前一个字母出现若干次（可以 $0$ 次）。

**题解**：我们令 $dp[i][j]$ 表示 $S_1[1...i]$ 和 $S_2[1...j]$ 是否能完全匹配。转移方程为：

* 若 $S_2[j] = `.`$，那么 $dp[i][j] = dp[i][j] \lor dp[i-1][j-1]$
* 若 $S_2[j]$ 为大小写字母，那么 $dp[i][j]=dp[i][j] \lor \Big(dp[i-1][j-1]\land \big[S_1[i]=S_2[j]\big]\Big)$
* 若 $S_2[j]=`*`$，我们还要分
    - 若 $S_2[j-1]=`.`$，那么 $\displaystyle dp[i][j]=dp[i][j]\lor \bigvee_{0\leq k}\Big(dp[i-k][j-2]\land \big[\forall p(p\in [i-k+1,i) \to [S_1[p]=S_1[i]])\big]\Big)$
    - 若 $S_2[j-1]$ 为大小写字母，那么 $\displaystyle dp[i][j]=dp[i][j]\lor \bigvee_{0\leq k}\Big(dp[i-k][j-2]\land \big[\forall p(p\in [i-k+1,i] \to [S_1[p]=S_2[j-1]])\big]\Big)$

朴素的转移是 $\mathcal{O}(n^3)$ ，我们注意到 $\displaystyle \bigvee_{0\leq k}\Big(dp[i-k][j-2]\land \big[\forall p(p\in [i-k+1,i) \to [S_1[p]=S_1[i]])\big]\Big)$ 这个条件可以用滑窗优化，所以最后复杂度为 $\mathcal{O}(n^2)$。

# Replay and Summary

## Replay

先吐槽一下这场的题面真是各种错误啊，数据真的各种弱啊。

Z 先发现 H 是道水题，上来切了。然后 W 觉得 E 也很水啊，写完 wa 了一发之后冷静了一下，Z 造了组数据然后 W 改了改算法也 a 了。D 跟 W 讨论了一下 B，觉得随便怎么树上套个数据结构就可以做，但是 D 想用树剖，W 觉得没必要，而且有点害怕 64MB 的空间，所以直接用树状数组维护了一下每个点到根的信息。D 写完 1a。

Z 发现 I 是一个 old 题，以前做过，然后就开始写。写完之后果然 wa 了。D 也大概想到了 F 的做法，跟 W 讨论了一下都感觉没什么问题，然后写了。也 wa 掉了。

D 发现自己的做法不能处理一些情况，就开始改。而 Z 有点心态爆炸，不停改改改，贡献了很多 -1。D 在反图上又跑了一次之后过掉了 F。

W 终于开始决定看很多队伍都通过的 J 题，感觉肯定有很多队伍用正则通过了本题。但是 W 不会用正则库啊，现查感觉不符合武德啊。于是 W 决定自己想。就想出了一个 O(n^3) 的 dp。然后发现似乎可以滑窗优化转移，就 O(n^2) 了！ 在艰难地通过了 D 造的几组超强数据后，J 题 1a了。

然后 W 实在看不下去 Z 的胡乱提交，来帮 Z 读代码，对每句话发出灵魂拷问“这句话是这样吗？真的是这样吗？”。在 W 的灵魂拷问之下，Z 发现了一个错误，改掉之后过了。

剩下三道计算几何和一道奇怪题。Z 开始搞 D，然后 W 和 D 讨论 A。讨论了一会儿，D 就开始写 A 了。写完 wa 掉了一次，两人又讨论发现了一个特例，判了之后也过掉了。剩下的时间 Z 给 D 贡献了 -10。最后 10min，发现 G 是个 sb 题，然而没时间写了。

计算几何还是弊队弱项，得加强练习。主要的问题在于：1.模板的精度处理不当 2.实现算法的细节损失太多精度。


